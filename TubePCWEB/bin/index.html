<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <style>

   body{background-color: #000000; background-image: url(bg.png);} 

   b{font-size: 18px; }

   u{color: #FFFF00;}

   #wait{ height: 16px; color: #000000; }

   #active{visibility: hidden; height: 16px; }

   #info{color: #FFFFFF; font-size: 18px; }

   #canvas:not(:-webkit-full-screen) { /*WebKit, Opera 15+*/
    border: 2px solid white;
   }

   #canvas:-webkit-full-screen { /*WebKit, Opera 15+*/
    border: initial;
   }

   #canvas:not(:-moz-full-screen) { /*FireFox*/
    border: 2px solid white;
   }

   #canvas:-moz-full-screen { /*FireFox*/
    border: initial;
   }

   #canvas:not(:full-screen) { /*Opera 12.15-, Blink, w3c standard*/
    border: 2px solid white;
   }

   #canvas:full-screen { /*Opera 12.15-, Blink, w3c standard*/
    border: initial;
   }

   #progress{height:20px; width:400px; }

  </style>

</head>

<body>

<center>

<div id="wait">
 <b>LOADING...&nbsp;&nbsp;&nbsp;&nbsp;<progress id="progress" max="100" value="0"></progress></b>
</div>

<br>

    <!-- Create the canvas that the C++ code will draw into -->

   <canvas id="canvas" oncontextmenu="event.preventDefault();" width="640" height="400" ></canvas>

</center>

    <!-- Allow the C++ to access the canvas element --> 
    <script type='text/javascript'>

      var progressElement = document.getElementById('progress');

      var Module = 
      {
        canvas: (function() { return document.getElementById('canvas'); })(),

        setStatus: function(text)
        {
          if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
          if (text === Module.setStatus.last.text) return;

          var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
          var now = Date.now();

          if (m && now - Module.setStatus.last.time < 30) return; // if this is a progress update, skip it if too soon

          Module.setStatus.last.time = now;
          Module.setStatus.last.text = text;

          if (m)
          {
            text = m[1];
            progressElement.value = parseInt(m[2])*100;
            progressElement.max = parseInt(m[4])*100;
            progressElement.hidden = false;

          }
          else
          {
            progressElement.value = null;
            progressElement.max = null;
            progressElement.hidden = true;
          }
        }
      };

    </script>
    
    <!-- Add the javascript glue code (index.js) as generated by Emscripten -->
    <script src="index.js"></script>

</body>

</html>
